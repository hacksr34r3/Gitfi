<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="google-site-verification" content="vMEXXPxVEgAQ0jIgYPdcViN6q9jhPRBe8ufp5dtSuAo" />
    <title>Gitfi - Professional GitHub Profile Explorer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #1a2026;
            --secondary: #4a5568;
            --accent: #2563eb;
            --light: #f7fafc;
            --dark: #111827;
            --success: #10b981;
            --danger: #ef4444;
           Eliot
            --warning: #f59e0b;
            --bg-light: #ffffff;
            --bg-dark: #1f2937;
            --text-light: #1f2937;
            --text-dark: #e5e7eb;
            --border: #e5e7eb;
        }

        [data-theme="dark"] {
            --bg: var(--bg-dark);
            --text: var(--text-dark);
            --card-bg: var(--dark);
            --border-color: #374151;
        }

        [data-theme="light"] {
            --bg: var(--bg-light);
            --text: var(--text-light);
            --card-bg: var(--light);
            --border-color: var(--border);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 24px;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
        }

        h1 {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), var(--success));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            cursor: pointer;
            display: inline-block;
            transition: opacity 0.2s ease;
        }

        h1:hover {
            opacity: 0.85;
        }

        .header-buttons {
            position: absolute;
            right: 0;
            top: 0;
            display: flex;
            gap: 12px;
        }

        .theme-toggle,
        .settings-button {
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .theme-toggle:hover,
        .settings-button:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
        }

        .search-container {
            display: flex;
            gap: 12px;
            max-width: 900px;
            margin: 0 auto 24px;
        }

        .search-input {
            flex: 1;
            padding: 14px 24px;
            border: 2px solid var(--border-color);
            border-radius: 12px;
            font-size: 1rem;
            outline: none;
            background-color: var(--card-bg);
            transition: all 0.3s ease;
        }

        .search-input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 4px rgba(37, 99, 235, 0.1);
        }

        .search-button {
            background-color: var(--accent);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 12px 28px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .search-button:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 16px;
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
            padding: 32px;
            margin-bottom: 24px;
            transition: all 0.3s ease;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 24px;
            flex-wrap: wrap;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 3px solid var(--bg);
            transition: transform 0.3s ease;
        }

        .avatar:hover {
            transform: scale(1.05);
        }

        .user-info h2 {
            font-size: 2rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .user-stats {
            display: flex;
            gap: 16px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .stat {
            background-color: var(--bg-light);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .bio {
            background-color: var(--bg-light);
            padding: 20px;
            border-radius: 12px;
            margin-top: 16px;
            font-size: 1rem;
        }

        .repos-container {
            margin-top: 24px;
        }

        .repos {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
        }

        .repo {
            background-color: var(--primary);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .repo:hover {
            background-color: var(--accent);
            transform: translateY(-3px);
        }

        .repo-details {
            font-size: 0.85rem;
            opacity: 0.9;
            margin-top: 8px;
        }

        .pagination {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 24px;
        }

        .pagination-button {
            background-color: var(--accent);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .pagination-button:hover {
            background-color: #1d4ed8;
            transform: translateY(-2px);
        }

        .pagination-button:disabled {
            background-color: var(--secondary);
            cursor: not-allowed;
            transform: none;
        }

        .recent-searches {
            margin: 24px 0;
            padding: 20px;
            background-color: var(--card-bg);
            border-radius: 12px;
        }

        .recent-search-item {
            display: inline-flex;
            align-items: center;
            padding: 8px 16px;
            margin: 6px;
            background-color: var(--accent);
            color: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .recent-search-item:hover {
            background-color: #1d4ed8;
        }

        .recent-search-item .delete-search {
            margin-left: 8px;
            font-size: 0.8rem;
            opacity: 0.7;
            cursor: pointer;
        }

        .recent-search-item .delete-search:hover {
            opacity: 1;
        }

        .ad-container {
            text-align: center;
            margin: 24px 0;
            padding: 24px;
            background-color: var(--card-bg);
            border-radius: 12px;
        }

        .user-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
            margin-top: 24px;
        }

        .user-item {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .user-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.12);
        }

        .user-item-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 3px solid var(--bg);
        }

        .user-item-info {
            flex: 1;
        }

        .user-item-name {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .user-item-login {
            font-size: 0.85rem;
            color: var(--secondary);
        }

        .results-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin: 24px 0 16px;
            color: var(--primary);
        }

        .settings-popup {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);
            max-width: 500px;
            width: 90%;
            z-index: 1000;
        }

        .settings-popup.show {
            display: block;
        }

        .settings-popup h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .settings-popup .close-popup {
            position: absolute;
            top: 16px;
            right: 16px;
            background: none;
            border: none;
            font-size: 1.2rem;
            color: var(--secondary);
            cursor: pointer;
        }

        .settings-popup .close-popup:hover {
            color: var(--danger);
        }

        .settings-option {
            margin-bottom: 20px;
        }

        .settings-option label {
            display: block;
            font-size: 1rem;
            font-weight: 500;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .settings-option select,
        .settings-option input[type="checkbox"] {
            width: 100%;
            padding: 10px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background-color: var(--bg-light);
        }

        .settings-option input[type="checkbox"] {
            width: auto;
            margin-right: 8px;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        .overlay.show {
            display: block;
        }

        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }

            h1 {
                font-size: 2.5rem;
            }

            .search-container {
                flex-direction: column;
            }

            .profile-header {
                flex-direction: column;
                text-align: center;
            }

            .repos {
                grid-template-columns: 1fr;
            }

            .user-list {
                grid-template-columns: 1fr;
            }

            .settings-popup {
                width: 95%;
            }
        }
    </style>
</head>

<body data-theme="light">
    <div class="container">
        <header>
            <h1 onclick="goToHome()">Gitfi</h1>
            <p>Professional GitHub Profile Explorer</p>
            <div class="header-buttons">
                <button class="settings-button" id="settingsButton">
                    <i class="fas fa-cog"></i>
                </button>
                <button class="theme-toggle" id="themeToggle">
                    <i class="fas fa-moon"></i>
                </button>
            </div>
        </header>

        <div class="ad-container">
            <script type="text/javascript">
                atOptions = {
                    'key': 'd31078add534fbc9efe5837832ddbe30',
                    'format': 'iframe',
                    'height': 90,
                    'width': 728,
                    'params': {}
                };
            </script>
            <script type="text/javascript" src="//www.highperformanceformat.com/d31078add534fbc9efe5837832ddbe30/invoke.js"></script>
        </div>

        <form class="inputForm" id="userInput">
            <div class="search-container">
                <input type="text" id="inputBox" autocomplete="off" placeholder="Enter GitHub username or keyword" class="search-input" />
                <button type="submit" class="search-button">
                    <i class="fas fa-search"></i> Search
                </button>
            </div>
        </form>

        <div class="recent-searches" id="recentSearches" style="display: none;">
            <h3>Recent Searches</h3>
            <div id="recentSearchList"></div>
        </div>

        <main id="main"></main>

        <div class="overlay" id="overlay"></div>
        <div class="settings-popup" id="settingsPopup">
            <button class="close-popup" id="closePopup"><i class="fas fa-times"></i></button>
            <h2>Developer Options</h2>
            <div class="settings-option">
                <label for="sortOrder">Sort Results By</label>
                <select id="sortOrder">
                    <option value="best-match">Best Match</option>
                    <option value="followers">Followers</option>
                    <option value="repositories">Repositories</option>
                    <option value="joined">Join Date</option>
                </select>
            </div>
            <div class="settings-option">
                <label for="userType">User Type</label>
                <select id="userType">
                    <option value="all">All</option>
                    <option value="user">Users</option>
                    <option value="organization">Organizations</option>
                </select>
            </div>
            <div class="settings-option">
                <label>
                    <input type="checkbox" id="showPrivateRepos" />
                    Include Private Repositories
                </label>
            </div>
            <div class="settings-option">
                <label>
                    <input type="checkbox" id="cacheResults" checked />
                    Cache Search Results
                </label>
            </div>
        </div>
    </div>

    <script>
        let api = "https://api.github.com/search/users?q=";
        let userApi = "https://api.github.com/users/";
        let currentPage = 1;
        const perPage = 30;
        let currentUsername = '';
        let currentKeyword = '';
        let settings = {
            sortOrder: 'best-match',
            userType: 'all',
            showPrivateRepos: false,
            cacheResults: true
        };
        let searchCache = new Map();

        // Load Axios
        let fetchScript = document.createElement("script");
        fetchScript.src = "https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js";
        document.head.appendChild(fetchScript);

        let main = document.getElementById("main");
        let inputForm = document.getElementById("userInput");
        let inputBox = document.getElementById("inputBox");
        let themeToggle = document.getElementById("themeToggle");
        let settingsButton = document.getElementById("settingsButton");
        let settingsPopup = document.getElementById("settingsPopup");
        let closePopup = document.getElementById("closePopup");
        let overlay = document.getElementById("overlay");
        let recentSearches = document.getElementById("recentSearches");
        let recentSearchList = document.getElementById("recentSearchList");
        let sortOrder = document.getElementById("sortOrder");
        let userType = document.getElementById("userType");
        let showPrivateRepos = document.getElementById("showPrivateRepos");
        let cacheResults = document.getElementById("cacheResults");

        // Go to home screen
        const goToHome = () => {
            inputBox.value = '';
            currentPage = 1;
            searchUsers('a');
        };

        // Theme handling
        const toggleTheme = () => {
            const body = document.body;
            const currentTheme = body.dataset.theme;
            body.dataset.theme = currentTheme === 'light' ? 'dark' : 'light';
            themeToggle.innerHTML = `<i class="fas fa-${currentTheme === 'light' ? 'sun' : 'moon'}"></i>`;
            localStorage.setItem('theme', body.dataset.theme);
        };

        // Settings popup
        const toggleSettingsPopup = () => {
            settingsPopup.classList.toggle('show');
            overlay.classList.toggle('show');
        };

        // Recent searches
        const saveSearch = (username) => {
            let searches = JSON.parse(localStorage.getItem('recentSearches') || '[]');
            if (!searches.includes(username)) {
                searches.unshift(username);
                searches = searches.slice(0, 5);
                localStorage.setItem('recentSearches', JSON.stringify(searches));
                displayRecentSearches();
            }
        };

        const deleteSearch = (username) => {
            let searches = JSON.parse(localStorage.getItem('recentSearches') || '[]');
            searches = searches.filter(search => search !== username);
            localStorage.setItem('recentSearches', JSON.stringify(searches));
            displayRecentSearches();
        };

        const displayRecentSearches = () => {
            let searches = JSON.parse(localStorage.getItem('recentSearches') || '[]');
            if (searches.length > 0) {
                recentSearches.style.display = 'block';
                recentSearchList.innerHTML = searches.map(search => `
                    <span class="recent-search-item">
                        <span onclick="getUserDetails('${search}')">${search}</span>
                        <span class="delete-search" onclick="deleteSearch('${search}')"><i class="fas fa-times"></i></span>
                    </span>
                `).join('');
            } else {
                recentSearches.style.display = 'none';
            }
        };

        const searchUsers = async (keyword, page = 1) => {
            showLoading();
            currentKeyword = keyword;
            currentPage = page;
            const cacheKey = `${keyword}_${page}_${settings.sortOrder}_${settings.userType}`;
            
            if (settings.cacheResults && searchCache.has(cacheKey)) {
                displayUserList(searchCache.get(cacheKey));
                return;
            }

            try {
                let query = `${api}${encodeURIComponent(keyword)}&page=${page}&per_page=${perPage}`;
                if (settings.sortOrder !== 'best-match') {
                    query += `&sort=${settings.sortOrder}`;
                }
                if (settings.userType !== 'all') {
                    query += `+type:${settings.userType}`;
                }
                const response = await axios.get(query);
                if (settings.cacheResults) {
                    searchCache.set(cacheKey, response.data.items);
                }
                displayUserList(response.data.items, response.data.total_count);
            } catch (error) {
                handleError(error, "Error searching users");
            }
        };

        const displayUserList = (users, totalCount) => {
            if (!users || users.length === 0) {
                errorFunction("No users found");
                return;
            }

            main.innerHTML = `
                <h3 class="results-title">Search Results (${totalCount} users found)</h3>
                <div class="user-list" id="userList"></div>
                <div class="pagination" id="pagination"></div>
            `;

            let userList = document.getElementById("userList");
            users.forEach(user => {
                let userItem = document.createElement("div");
                userItem.className = "user-item";
                userItem.innerHTML = `
                    <img src="${user.avatar_url}" alt="${user.login}" class="user-item-avatar">
                    <div class="user-item-info">
                        <div class="user-item-name">${user.login}</div>
                        ${user.type ? `<div class="user-item-login">${user.type}</div>` : ''}
                    </div>
                `;
                userItem.addEventListener("click", () => {
                    saveSearch(user.login);
                    getUserDetails(user.login);
                });
                userList.appendChild(userItem);
            });

            const totalPages = Math.ceil(totalCount / perPage);
            let paginationElement = document.getElementById("pagination");
            paginationElement.innerHTML = `
                <button class="pagination-button" ${currentPage === 1 ? 'disabled' : ''} onclick="searchUsers('${currentKeyword}', ${currentPage - 1})">Previous</button>
                <span>Page ${currentPage} of ${totalPages}</span>
                <button class="pagination-button" ${currentPage >= totalPages ? 'disabled' : ''} onclick="searchUsers('${currentKeyword}', ${currentPage + 1})">Next</button>
            `;
        };

        const getUserDetails = async (username) => {
            showLoading();
            currentUsername = username;
            try {
                const response = await axios.get(`${userApi}${username}`);
                userCard(response.data);
                getRepos(username, 1);
            } catch (error) {
                handleError(error, error.response?.status === 404 ? "User not found" : "Error fetching user data");
            }
        };

        const getRepos = async (username, page) => {
            try {
                let url = `${userApi}${username}/repos?sort=created&per_page=${perPage}&page=${page}`;
                if (settings.showPrivateRepos) {
                    url += `&type=all`;
                }
                const response = await axios.get(url);
                repoCardFunction(response.data, page);
            } catch (error) {
                console.error("Problem fetching repos", error);
            }
        };

        const userCard = (user) => {
            let id = user.name || user.login;
            let bio = user.bio ? `<div class="bio"><p>${user.bio}</p></div>` : "";
            let location = user.location ? `<p><i class="fas fa-map-marker-alt"></i> ${user.location}</p>` : "";
            let twitter = user.twitter_username ? `<p><i class="fab fa-twitter"></i> <a href="https://twitter.com/${user.twitter_username}" target="_blank">@${user.twitter_username}</a></p>` : "";
            let blog = user.blog ? `<p><i class="fas fa-link"></i> <a href="${user.blog.startsWith('http') ? user.blog : 'https://' + user.blog}" target="_blank">${user.blog}</a></p>` : "";
            let company = user.company ? `<p><i class="fas fa-building"></i> ${user.company}</p>` : "";
            let hireable = user.hireable ? `<p><i class="fas fa-briefcase"></i> Available for hire</p>` : "";

            main.innerHTML = `
                <div class="card">
                    <div class="profile-header">
                        <img src="${user.avatar_url}" alt="${user.name}" class="avatar">
                        <div class="user-info">
                            <h2>${id}</h2>
                            <p>@${user.login}</p>
                            ${location}
                            ${company}
                            ${twitter}
                            ${blog}
                            ${hireable}
                            <div class="user-stats">
                                <div class="stat"><i class="fas fa-users"></i> ${user.followers} followers</div>
                                <div class="stat"><i class="fas fa-user-friends"></i> ${user.following} following</div>
                                <div class="stat"><i class="fas fa-code-branch"></i> ${user.public_repos} repos</div>
                            </div>
                        </div>
                    </div>
                    ${bio}
                    <div class="repos-container">
                        <h3 class="repos-title">Latest Repositories</h3>
                        <div class="repos" id="repos"></div>
                        <div class="pagination" id="pagination"></div>
                    </div>
                </div>
            `;
        };

        const repoCardFunction = (repos, page) => {
            let reposElement = document.getElementById("repos");
            let paginationElement = document.getElementById("pagination");
            reposElement.innerHTML = '';

            if (repos.length === 0) {
                reposElement.innerHTML = '<p>No repositories found</p>';
                return;
            }

            repos.forEach(repo => {
                let repoEl = document.createElement("a");
                repoEl.classList.add("repo");
                repoEl.href = repo.html_url;
                repoEl.target = "_blank";
                repoEl.innerHTML = `
                    <div><i class="fas fa-book"></i> ${repo.name}</div>
                    <div class="repo-details">
                        ${repo.description ? `<div>${repo.description}</div>` : ''}
                        <div>
                            ${repo.language ? `<span><i class="fas fa-code"></i> ${repo.language}</span>` : ''}
                            ${repo.stargazers_count > 0 ? `<span><i class="fas fa-star"></i> ${repo.stargazers_count}</span>` : ''}
                            ${repo.forks_count > 0 ? `<span><i class="fas fa-code-branch"></i> ${repo.forks_count} forks</span>` : ''}
                            ${repo.open_issues_count > 0 ? `<span><i class="fas fa-exclamation-circle"></i> ${repo.open_issues_count} issues</span>` : ''}
                        </div>
                    </div>
                `;
                reposElement.appendChild(repoEl);
            });

            paginationElement.innerHTML = `
                <button class="pagination-button" ${page === 1 ? 'disabled' : ''} onclick="getRepos('${currentUsername}', ${page - 1})">Previous</button>
                <span>Page ${page}</span>
                <button class="pagination-button" ${repos.length < perPage ? 'disabled' : ''} onclick="getRepos('${currentUsername}', ${page + 1})">Next</button>
            `;
        };

        const handleError = (error, message) => {
            if (error.response?.status === 403) {
                errorFunction("Rate limit exceeded. Please try again later.");
            } else {
                errorFunction(message);
            }
            console.error("Error:", error);
        };

        const errorFunction = (error) => {
            main.innerHTML = `
                <div class="card error-card">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h2>${error}</h2>
                    <p>Please try another search term</p>
                </div>
            `;
        };

        const showLoading = () => {
            main.innerHTML = `
                <div class="card" style="text-align: center;">
                    <i class="fas fa-spinner fa-spin" style="font-size: 2rem;"></i>
                    <p>Loading data...</p>
                </div>
            `;
        };

        inputForm.addEventListener("submit", (e) => {
            e.preventDefault();
            let keyword = inputBox.value.trim();
            if (keyword) {
                saveSearch(keyword);
                currentPage = 1;
                searchUsers(keyword, currentPage);
            }
        });

        themeToggle.addEventListener("click", toggleTheme);
        settingsButton.addEventListener("click", toggleSettingsPopup);
        closePopup.addEventListener("click", toggleSettingsPopup);
        overlay.addEventListener("click", toggleSettingsPopup);

        sortOrder.addEventListener("change", (e) => {
            settings.sortOrder = e.target.value;
            if (currentKeyword) {
                searchUsers(currentKeyword, currentPage);
            }
        });

        userType.addEventListener("change", (e) => {
            settings.userType = e.target.value;
            if (currentKeyword) {
                searchUsers(currentKeyword, currentPage);
            }
        });

        showPrivateRepos.addEventListener("change", (e) => {
            settings.showPrivateRepos = e.target.checked;
            if (currentUsername) {
                getRepos(currentUsername, 1);
            }
        });

        cacheResults.addEventListener("change", (e) => {
            settings.cacheResults = e.target.checked;
            if (!settings.cacheResults) {
                searchCache.clear();
            }
        });

        window.addEventListener('load', () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.body.dataset.theme = savedTheme;
            themeToggle.innerHTML = `<i class="fas fa-${savedTheme === 'light' ? 'moon' : 'sun'}"></i>`;
            displayRecentSearches();
            searchUsers('a');
        });
    </script>
</body>

</html>
